$(document).on("turbolinks:load",function(){function e(){var e=$("#date_start"),t=$("#date_end"),a=e.val(),s=t.val();sessionStorage.timesheets_date_start=a,sessionStorage.timesheets_date_end=s;var d=e.data("ajax-path")+"?"+e.attr("name")+"="+a+"&"+t.attr("name")+"="+s;$.ajax({url:d,type:"GET",dataType:"script"})}$("#timesheets").length&&($("#main_menu li").removeClass("active"),$("#mm_timesheets").addClass("active"),sessionStorage.timesheets_date_start&&$("#date_start").val(sessionStorage.timesheets_date_start),sessionStorage.timesheets_date_end&&$("#date_end").val(sessionStorage.timesheets_date_end),e(),$("#dialog_delete").data("delete","deleteTimesheet();"),$("#dialog_delete").data("un-delete","unDeleteTimesheet();"),deleteTimesheet=function(){$.ajax({url:$(".table").data("path-del")+$("tr.delete").data("id"),type:"delete",dataType:"script"}),1==$("tbody").children().length?$("#table_timesheets").empty():$("tr.delete").remove()},unDeleteMenuRequirement=function(){$("tr.delete").removeClass("delete")},$("#date_start").datepicker({onSelect:function(){var t=$(this),a=t.val(),s=$("#date_end");a!=t.data("old-value")&&(t.datepicker("getDate")>s.datepicker("getDate")&&s.val(t.val()),e())}}),$("#date_end").datepicker({onSelect:function(){var t=$(this),a=t.val(),s=$("#date_start");a!=t.data("old-value")&&(t.datepicker("getDate")<s.datepicker("getDate")&&s.val(a),e())}}),$(document).on("click","td .btn_del",function(){$(this).parents("tr").addClass("delete"),$("#dialog_delete").dialog("open")}),$(document).on("click","td .btn_view, td .btn_edit",function(){var e=$(this).parents("tr");sessionStorage.timesheets_table_row=e.index()+1,sessionStorage.timesheets_table_scroll=$("#table_timesheets").scrollTop(),window.location.replace(e.data("path-view"))}))});