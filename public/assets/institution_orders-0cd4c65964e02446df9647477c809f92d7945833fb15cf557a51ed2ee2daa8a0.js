$(document).on("turbolinks:load",function(){function t(){var t=$("#date_start"),e=$("#date_end"),i=t.val(),o=e.val();t.data("old-value",i),e.data("old-value",e),sessionStorage.instituiton_orders_date_start=i,sessionStorage.instituiton_orders_date_end=o;var a=t.data("ajax-path")+"?"+t.attr("name")+"="+i+"&"+e.attr("name")+"="+o;$.ajax({url:a,type:"GET",dataType:"script"})}$("#institution_orders").length&&($("#main_menu li").removeClass("active"),$("#mm_instituiton_orders").addClass("active"),sessionStorage.instituiton_orders_date_start&&$("#date_start").val(sessionStorage.instituiton_orders_date_start),sessionStorage.instituiton_orders_date_end&&$("#date_end").val(sessionStorage.instituiton_orders_date_end),t(),selectInstitutionOrder=function(){var t=1;sessionStorage.instituiton_orders_table_instituiton_orders_scroll&&$("#table_instituiton_orders").scrollTop(sessionStorage.instituiton_orders_table_instituiton_orders_scroll),sessionStorage.instituiton_orders_table_instituiton_orders_row&&(t=sessionStorage.instituiton_orders_table_instituiton_orders_row),$("#table_institution_orders tbody tr.selected").removeClass("selected"),$("#table_institution_orders tbody tr:nth-of-type("+t+")").addClass("selected"),filterTableIoCorrections()},emptyInstitutionOrder=function(){var t=$(".clmn:nth-of-type(2) h1");t.text(t.data("text")),sessionStorage.removeItem("instituiton_orders_table_instituiton_orders_row"),sessionStorage.removeItem("instituiton_orders_table_instituiton_orders_scroll")},filterTableIoCorrections=function(){var t=$("#table_institution_orders tbody tr.selected"),e=$(".clmn:nth-of-type(2) h1");e.text(e.data("text")+" "+t.children("td:nth-of-type(2)").html());var i=e.data("ajax-path")+t.data("id");$.ajax({url:i,type:"GET",dataType:"script"})},deleteInstituitonOrder=function(){var t=$("#table_institution_orders .table").data("path-del")+$("#table_institution_orders tr.delete").data("id");$.ajax({url:t,type:"DELETE",dataType:"script"}),1==$("#table_institution_orders tbody").children().length?$("#table_institution_orders").empty():$("#table_institution_orders tr.delete").remove()},unDeleteInstituitonOrder=function(){$("#table_institution_orders tr.delete").removeClass("delete")},deleteIoCorrection=function(){var t=$("#table_io_corrections .table").data("path-del")+$("#table_io_corrections tr.delete").data("id");$.ajax({url:t,type:"DELETE",dataType:"script"}),1==$("#table_io_corrections tbody").children().length?$("#table_io_corrections").empty():$("#table_io_corrections tr.delete").remove()},unDeleteIoCorrection=function(){$("#table_io_corrections tr.delete").removeClass("delete")},$("#create_institution_order").click(function(){$("#dialog_wait").dialog("open");var t=$("#date_start"),e=$("#date_end"),i=$(this).data("ajax-path")+"?"+t.attr("name")+"="+t.val()+"&"+e.attr("name")+"="+e.val();$.ajax({url:i,type:"POST",dataType:"script"})}),$("#create_io_correction").click(function(){$("#dialog_wait").dialog("open"),$.ajax({url:$(this).data("ajax-path")+$("#table_institution_orders tbody tr.selected").data("id"),type:"POST",dataType:"script"})}),$("#date_start").datepicker({onSelect:function(){var e=$(this),i=e.val(),o=$("#date_end");i!=e.data("old-value")&&(e.datepicker("getDate")>o.datepicker("getDate")&&o.val(e.val()),t())}}),$("#date_end").datepicker({onSelect:function(){var e=$(this),i=e.val(),o=$("#date_start");i!=e.data("old-value")&&(e.datepicker("getDate")<o.datepicker("getDate")&&o.val(i),t())}}),$(document).on("click","#table_institution_orders td .btn_del",function(){$(this).parents("tr").addClass("delete");var t=$("#dialog_delete");t.data("delete","deleteInstituitonOrder();"),t.data("un-delete","unDeleteInstituitonOrder();"),t.dialog("open")}),$(document).on("click","#table_institution_orders tbody tr",function(){var t=$(this);t.hasClass("selected")||(sessionStorage.instituiton_orders_table_instituiton_orders_row=t.index()+1,sessionStorage.instituiton_orders_table_instituiton_orders_scroll=$("#table_institution_orders").scrollTop(),selectInstitutionOrder())}),$(document).on("click","#table_institution_orders td .btn_view, #table_institution_orders td .btn_edit",function(){var t=$(this).parents("tr");window.location.replace($(this).parents("table").data("path-view")+t.data("id"))}),$(document).on("click","#table_io_corrections td .btn_del",function(){$(this).parents("tr").addClass("delete");var t=$("#dialog_delete");t.data("delete","deleteIoCorrection();"),t.data("un-delete","unDeleteIoCorrection();"),t.dialog("open")}),$(document).on("click","#table_io_corrections td .btn_view, #table_io_corrections td .btn_edit",function(){var t=$(this).parents("tr");sessionStorage.instituiton_orders_table_io_corrections_row=t.index()+1,sessionStorage.instituiton_orders_table_io_corrections_scroll=$("#table_io_corrections").scrollTop(),window.location.replace($(this).parents("table").data("path-view")+t.data("id"))}))});